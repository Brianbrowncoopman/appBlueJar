<ion-header class="ion-no-border">
  <ion-toolbar color="light" style="--border-style: none;">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home" text="Volver"></ion-back-button>
    </ion-buttons>

    <ion-title style="font-weight: 700; color: #212529;">Comedor</ion-title>
    
    <ion-buttons slot="end">
      <ion-datetime-button datetime="datetime-comedor" class="ion-margin-end"></ion-datetime-button>
      <ion-modal [keepContentsMounted]="true">
        <ng-template>
          <ion-datetime 
            id="datetime-comedor" 
            presentation="date" 
            (ionChange)="cambiarFecha($event)">
          </ion-datetime>
        </ng-template>
      </ion-modal>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding gray-background">
  
  <div class="welcome-section">
    <h2 class="section-title">Minuta del Día</h2>
    <p>Información para el equipo de garzones</p>
  </div>

  <div class="menu-container">
    <div class="input-card">
      <div class="input-header">
        <ion-icon name="leaf-outline" class="icon-entrada"></ion-icon>
        <ion-label>Entrada del Día</ion-label>
      </div>
      <ion-item lines="none" class="custom-input-item">
        <ion-input type="text" placeholder="Ej: Ensalada César" [(ngModel)]="minuta.entrada" (ionBlur)="guardarFirebase()"></ion-input>
      </ion-item>
    </div>

    <div class="input-card">
      <div class="input-header">
        <ion-icon name="restaurant-outline" class="icon-plato"></ion-icon>
        <ion-label>Plato Principal</ion-label>
      </div>
      <ion-item lines="none" class="custom-input-item">
        <ion-input type="text" placeholder="Ej: Lomo lo pobre" [(ngModel)]="minuta.plato" (ionBlur)="guardarFirebase()"></ion-input>
      </ion-item>
    </div>

    <div class="input-card">
      <div class="input-header">
        <ion-icon name="ice-cream-outline" class="icon-postre"></ion-icon>
        <ion-label>Postre del Día</ion-label>
      </div>
      <ion-item lines="none" class="custom-input-item">
        <ion-input type="text" placeholder="Ej: Leche nevada" [(ngModel)]="minuta.postre" (ionBlur)="guardarFirebase()"></ion-input>
      </ion-item>
    </div>

    <div class="input-card">
      <div class="input-header">
        <ion-icon name="wine-outline" class="icon-bebida"></ion-icon>
        <ion-label>Bebida / Jugo del Día</ion-label>
      </div>
      <ion-item lines="none" class="custom-input-item">
        <ion-input type="text" placeholder="Ej: Limonada" [(ngModel)]="minuta.bebida" (ionBlur)="guardarFirebase()"></ion-input>
      </ion-item>
    </div>
  </div>

  <div class="welcome-section" style="margin-top: 20px;">
    <h2 class="section-title">Plazas</h2>
    <p>Responsables por sector</p>
  </div>

  <div class="plazas-container">
    <ion-grid class="ion-no-padding">
      <ion-row>
        <ion-col size="4" *ngFor="let p of ['p1', 'p2', 'p3', 'p4', 'p6']">
          <div class="input-card plaza-card">
            <div class="input-header">
              <ion-label>{{ p | uppercase }}</ion-label>
            </div>
            <ion-item lines="none" class="custom-input-item">
              <ion-input type="text" placeholder="Nombre" [(ngModel)]="plazas[p]" (ionBlur)="guardarFirebase()"></ion-input>
            </ion-item>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>

  <div class="welcome-section" style="margin-top: 20px;">
    <h2 class="section-title">Existencias</h2>
    <p>Stock disponible hoy</p>
  </div>

  <div class="existencias-container">
    <ion-item-group>
      <ion-item-divider color="none" class="ion-no-padding" style="border: none;">
        <ion-label style="color: #2ecc71; font-weight: 700; margin-left: 5px;">ENSALADAS</ion-label>
      </ion-item-divider>
      <ion-grid class="ion-no-padding">
        <ion-row>
          <ion-col size="6" *ngFor="let plato of platosEnsaladas">
            <div class="input-card stock-card">
              <ion-label class="plato-nombre">{{ plato | titlecase }}</ion-label>
              <ion-item lines="none" class="stock-input-item">
                <ion-input type="text" placeholder="-" [(ngModel)]="existencias[plato]" (ionBlur)="guardarFirebase()"></ion-input>
              </ion-item>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item-group>

    <ion-item-group style="margin-top: 15px;">
      <ion-item-divider color="none" class="ion-no-padding" style="border: none;">
        <ion-label style="color: #e67e22; font-weight: 700; margin-left: 5px;">FONDOS</ion-label>
      </ion-item-divider>
      <ion-grid class="ion-no-padding">
        <ion-row>
          <ion-col size="6" *ngFor="let plato of platosFondos">
            <div class="input-card stock-card">
              <ion-label class="plato-nombre">{{ plato | titlecase }}</ion-label>
              <ion-item lines="none" class="stock-input-item">
                <ion-input type="text"
                maxLength="3"
                 placeholder="-"
                [(ngModel)]="existencias[plato]" 
                (ionBlur)="guardarFirebase()">
              </ion-input>
              </ion-item>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item-group>
  </div>

  <div class="ion-padding" style="margin-top: 20px;">
    <ion-button expand="block" class="whatsapp-button" shape="round" (click)="finalizarYEnviar()">
      <ion-icon slot="start" name="logo-whatsapp"></ion-icon>
      FINALIZAR Y ENVIAR REPORTE
    </ion-button>
  </div>

</ion-content>